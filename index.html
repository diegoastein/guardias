<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Guardias Pedi√°tricas</title>
    
    <!-- 1. Cargamos React y ReactDOM desde la nube -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 2. Cargamos Babel para entender el c√≥digo moderno -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 3. Cargamos Tailwind para que se vea lindo -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

<!-- Aqu√≠ es donde React va a dibujar la aplicaci√≥n -->
<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    // --- √çCONOS (Incrustados para no depender de librer√≠as externas) ---
    const IconWrapper = ({ children }) => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">{children}</svg>;
    
    const User = () => <IconWrapper><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconWrapper>;
    const CalendarIcon = () => <IconWrapper><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconWrapper>;
    const Umbrella = () => <IconWrapper><path d="M22 12A10 10 0 0 0 12 2v20"/><path d="M6 12a6 6 0 0 1 12 0"/></IconWrapper>; // Simplificado
    const Moon = () => <IconWrapper><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></IconWrapper>;
    const Sun = () => <IconWrapper><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></IconWrapper>;
    const LayoutTemplate = () => <IconWrapper><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></IconWrapper>;
    const RefreshCw = () => <IconWrapper><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></IconWrapper>;
    const Settings = () => <IconWrapper><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></IconWrapper>;
    const Save = () => <IconWrapper><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconWrapper>;
    const Download = () => <IconWrapper><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></IconWrapper>;
    const Upload = () => <IconWrapper><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></IconWrapper>;
    const Trash2 = () => <IconWrapper><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></IconWrapper>;
    const Edit = () => <IconWrapper><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></IconWrapper>;
    const XCircle = () => <IconWrapper><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconWrapper>;
    const CheckCircle = () => <IconWrapper><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconWrapper>;

    // --- COMPONENTES UI ---
    const Card = ({ children, className = "" }) => (
        <div className={`bg-white rounded-lg shadow p-4 ${className}`}>{children}</div>
    );

    const Button = ({ onClick, children, variant = "primary", className = "", disabled=false, title="" }) => {
        const base = "px-4 py-2 rounded-md transition-colors font-medium flex items-center justify-center gap-2";
        const styles = {
            primary: "bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300",
            secondary: "bg-gray-100 text-gray-700 hover:bg-gray-200",
            danger: "bg-red-100 text-red-600 hover:bg-red-200",
            success: "bg-green-600 text-white hover:bg-green-700",
            warning: "bg-orange-500 text-white hover:bg-orange-600",
            icon: "p-2 hover:bg-gray-200 text-gray-600"
        };
        return (
            <button onClick={onClick} disabled={disabled} className={`${base} ${styles[variant]} ${className}`} title={title}>
                {children}
            </button>
        );
    };

    // --- APP PRINCIPAL ---
    function App() {
        const [view, setView] = useState('calendario');
        const [currentDate, setCurrentDate] = useState(new Date());
        
        // --- ESTADOS ---
        const [medicos, setMedicos] = useState(() => {
            const saved = localStorage.getItem('medicos');
            return saved ? JSON.parse(saved) : [
                { id: 1, nombre: "Dr. Titular (Jefe)", tipo: "Titular", tieneRecibo: true },
                { id: 2, nombre: "Dra. Residente (R3)", tipo: "Residente", tieneRecibo: true },
                { id: 3, nombre: "Dr. Sin Papeles (Suplente)", tipo: "Externo", tieneRecibo: false },
                { id: 4, nombre: "Dra. Administrativa (Solo presta)", tipo: "Titular", tieneRecibo: true }
            ];
        });

        const [licencias, setLicencias] = useState(() => {
            const saved = localStorage.getItem('licencias');
            return saved ? JSON.parse(saved) : [];
        });
        
        const [guardias, setGuardias] = useState(() => {
            const saved = localStorage.getItem('guardias');
            return saved ? JSON.parse(saved) : {};
        });

        const [plantilla, setPlantilla] = useState(() => {
            const saved = localStorage.getItem('plantilla');
            return saved ? JSON.parse(saved) : {};
        });

        // --- PERSISTENCIA ---
        useEffect(() => { localStorage.setItem('medicos', JSON.stringify(medicos)); }, [medicos]);
        useEffect(() => { localStorage.setItem('licencias', JSON.stringify(licencias)); }, [licencias]);
        useEffect(() => { localStorage.setItem('guardias', JSON.stringify(guardias)); }, [guardias]);
        useEffect(() => { localStorage.setItem('plantilla', JSON.stringify(plantilla)); }, [plantilla]);

        // --- FUNCIONES AUXILIARES ---
        const getDaysInMonth = (date) => {
            const year = date.getFullYear();
            const month = date.getMonth();
            const days = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1).getDay(); 
            return { days, firstDay, month, year };
        };

        const estaDeLicencia = (medicoId, fechaStr) => {
            return licencias.some(lic => 
                lic.medicoId === parseInt(medicoId) && 
                fechaStr >= lic.desde && 
                fechaStr <= lic.hasta
            );
        };

        const obtenerDetalleLicencia = (medicoId, fechaStr) => {
            return licencias.find(lic => 
                lic.medicoId === parseInt(medicoId) && 
                fechaStr >= lic.desde && 
                fechaStr <= lic.hasta
            );
        };

        // --- VISTAS ---

        // 1. GESTION DE MEDICOS (CON EDICION)
        const VistaMedicos = () => {
            const [nuevo, setNuevo] = useState({ nombre: '', tipo: 'Titular', tieneRecibo: true });
            const [editingId, setEditingId] = useState(null);
            const [editForm, setEditForm] = useState({});

            const agregar = () => {
                if (!nuevo.nombre) return;
                setMedicos([...medicos, { ...nuevo, id: Date.now() }]);
                setNuevo({ nombre: '', tipo: 'Titular', tieneRecibo: true });
            };

            const borrar = (id) => {
                if(window.confirm('¬øBorrar m√©dico? Se perder√°n sus datos hist√≥ricos.')) {
                    setMedicos(medicos.filter(m => m.id !== id));
                }
            };

            const startEdit = (medico) => {
                setEditingId(medico.id);
                setEditForm(medico);
            };

            const saveEdit = () => {
                setMedicos(medicos.map(m => m.id === editingId ? editForm : m));
                setEditingId(null);
            };

            return (
                <div className="space-y-6">
                    <Card>
                        <h3 className="text-lg font-bold mb-4">Agregar M√©dico</h3>
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Nombre</label>
                                <input className="w-full p-2 border rounded" value={nuevo.nombre} onChange={e => setNuevo({...nuevo, nombre: e.target.value})} placeholder="Ej: Dr. P√©rez" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Tipo</label>
                                <select className="w-full p-2 border rounded" value={nuevo.tipo} onChange={e => setNuevo({...nuevo, tipo: e.target.value})}>
                                    <option value="Titular">Titular (Planta)</option>
                                    <option value="Residente">Residente</option>
                                    <option value="Externo">Externo (Sin Cargo)</option>
                                </select>
                            </div>
                            <div className="flex items-center pb-3">
                                <input type="checkbox" id="chkRecibo" className="w-4 h-4 text-blue-600" checked={nuevo.tieneRecibo} onChange={e => setNuevo({...nuevo, tieneRecibo: e.target.checked})} />
                                <label htmlFor="chkRecibo" className="ml-2 text-sm text-gray-700">¬øPuede cobrar (Tiene recibo)?</label>
                            </div>
                            <Button onClick={agregar}>Agregar</Button>
                        </div>
                    </Card>

                    <Card>
                        <h3 className="text-lg font-bold mb-4">Plantel Actual</h3>
                        <div className="overflow-x-auto">
                            <table className="min-w-full divide-y divide-gray-200">
                                <thead className="bg-gray-50">
                                    <tr>
                                        <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
                                        <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rol</th>
                                        <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado Financiero</th>
                                        <th className="px-6 py-3 text-right">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody className="bg-white divide-y divide-gray-200">
                                    {medicos.map(m => (
                                        <tr key={m.id}>
                                            {editingId === m.id ? (
                                                <>
                                                    <td className="px-6 py-4"><input className="border p-1 rounded w-full" value={editForm.nombre} onChange={e => setEditForm({...editForm, nombre: e.target.value})} /></td>
                                                    <td className="px-6 py-4">
                                                        <select className="border p-1 rounded w-full" value={editForm.tipo} onChange={e => setEditForm({...editForm, tipo: e.target.value})}>
                                                            <option value="Titular">Titular</option>
                                                            <option value="Residente">Residente</option>
                                                            <option value="Externo">Externo</option>
                                                        </select>
                                                    </td>
                                                    <td className="px-6 py-4">
                                                        <input type="checkbox" checked={editForm.tieneRecibo} onChange={e => setEditForm({...editForm, tieneRecibo: e.target.checked})} /> Recibo
                                                    </td>
                                                    <td className="px-6 py-4 text-right flex justify-end gap-2">
                                                        <button onClick={saveEdit} className="text-green-600"><CheckCircle size={20}/></button>
                                                        <button onClick={() => setEditingId(null)} className="text-red-600"><XCircle size={20}/></button>
                                                    </td>
                                                </>
                                            ) : (
                                                <>
                                                    <td className="px-6 py-4 whitespace-nowrap font-medium text-gray-900">{m.nombre}</td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-gray-500">{m.tipo}</td>
                                                    <td className="px-6 py-4 whitespace-nowrap">
                                                        {m.tieneRecibo ? 
                                                            <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Apto Cobro / Pr√©stamo</span> : 
                                                            <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Necesita Prestamista</span>
                                                        }
                                                    </td>
                                                    <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium flex justify-end gap-3">
                                                        <button onClick={() => startEdit(m)} className="text-blue-600 hover:text-blue-900" title="Editar"><Edit size={18}/></button>
                                                        <button onClick={() => borrar(m.id)} className="text-red-600 hover:text-red-900" title="Borrar"><Trash2 size={18}/></button>
                                                    </td>
                                                </>
                                            )}
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </Card>
                </div>
            );
        };

        // 2. GESTION DE LICENCIAS
        const VistaLicencias = () => {
            const [nueva, setNueva] = useState({ medicoId: '', desde: '', hasta: '', motivo: 'Vacaciones', reemplazoId: '' });

            const agregar = () => {
                if (!nueva.medicoId || !nueva.desde || !nueva.hasta) return alert("Faltan datos");
                setLicencias([...licencias, { ...nueva, id: Date.now(), medicoId: parseInt(nueva.medicoId), reemplazoId: nueva.reemplazoId ? parseInt(nueva.reemplazoId) : null }]);
                setNueva({ ...nueva, medicoId: '', reemplazoId: '' });
            };

            return (
                <div className="space-y-6">
                    <Card>
                        <h3 className="text-lg font-bold mb-4">Registrar Licencia / Ausencia</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">M√©dico</label>
                                <select className="w-full p-2 border rounded" value={nueva.medicoId} onChange={e => setNueva({...nueva, medicoId: e.target.value})}>
                                    <option value="">Seleccione...</option>
                                    {medicos.map(m => <option key={m.id} value={m.id}>{m.nombre}</option>)}
                                </select>
                            </div>
                             <div>
                                <label className="block text-sm font-medium text-gray-700">Motivo</label>
                                <input type="text" className="w-full p-2 border rounded" value={nueva.motivo} onChange={e => setNueva({...nueva, motivo: e.target.value})} />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Cubierto por (Opcional)</label>
                                <select className="w-full p-2 border rounded" value={nueva.reemplazoId} onChange={e => setNueva({...nueva, reemplazoId: e.target.value})}>
                                    <option value="">Sin definir / Varios</option>
                                    {medicos.map(m => <option key={m.id} value={m.id}>{m.nombre}</option>)}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Desde</label>
                                <input type="date" className="w-full p-2 border rounded" value={nueva.desde} onChange={e => setNueva({...nueva, desde: e.target.value})} />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Hasta</label>
                                <input type="date" className="w-full p-2 border rounded" value={nueva.hasta} onChange={e => setNueva({...nueva, hasta: e.target.value})} />
                            </div>
                            <Button onClick={agregar}>Registrar</Button>
                        </div>
                    </Card>

                    <Card>
                         <h3 className="text-lg font-bold mb-4">Historial de Licencias</h3>
                         <ul className="divide-y divide-gray-200">
                            {licencias.sort((a,b) => b.desde.localeCompare(a.desde)).map(lic => {
                                const med = medicos.find(m => m.id === lic.medicoId);
                                const reemplazo = lic.reemplazoId ? medicos.find(m => m.id === lic.reemplazoId) : null;
                                return (
                                    <li key={lic.id} className="py-4 flex justify-between items-center">
                                        <div>
                                            <p className="font-medium text-lg">{med ? med.nombre : 'M√©dico borrado'}</p>
                                            <p className="text-sm text-gray-500">Del {lic.desde} al {lic.hasta} ({lic.motivo})</p>
                                            {reemplazo && (
                                                <p className="text-xs text-blue-600 font-semibold mt-1">‚Ü≥ Cubierto por: {reemplazo.nombre}</p>
                                            )}
                                        </div>
                                        <button onClick={() => setLicencias(licencias.filter(l => l.id !== lic.id))} className="text-red-500 text-sm hover:underline">Eliminar</button>
                                    </li>
                                );
                            })}
                         </ul>
                    </Card>
                </div>
            );
        };

        // 5. VISTA: PLANTILLA
        const VistaPlantilla = () => {
            const [editingDay, setEditingDay] = useState(null); // 0=Dom, 1=Lun...
            
            const diasSemana = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
            const defaultDia = { estado: 'VACANTE', tipoPago: 'SISTEMA' };

            const EditTemplateModal = () => {
                if (editingDay === null) return null;
                
                const dayData = plantilla[editingDay] || { 
                    dia1: {...defaultDia}, dia2: {...defaultDia}, 
                    noche1: {...defaultDia}, noche2: {...defaultDia} 
                };
                const [form, setForm] = useState(dayData);

                const guardar = () => {
                    setPlantilla({ ...plantilla, [editingDay]: form });
                    setEditingDay(null);
                };

                const TemplateSlot = ({ label, slotData, onChange }) => (
                    <div className="bg-gray-50 p-2 rounded border mb-2">
                        <div className="font-bold text-xs text-gray-600 mb-1">{label}</div>
                        <select 
                            className="w-full p-1 border rounded text-sm mb-1" 
                            value={slotData.medicoId || ''} 
                            onChange={e => onChange({...slotData, estado: e.target.value ? 'CUBIERTA' : 'VACANTE', medicoId: e.target.value})}
                        >
                            <option value="">-- Vacante --</option>
                            {medicos.map(m => <option key={m.id} value={m.id}>{m.nombre}</option>)}
                        </select>
                    </div>
                );

                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                        <div className="bg-white rounded-lg shadow-xl max-w-lg w-full p-6">
                            <h3 className="text-xl font-bold mb-4">Configurar Base: {diasSemana[editingDay]}</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <h4 className="font-bold text-orange-600 mb-2">Turno D√≠a</h4>
                                    <TemplateSlot label="M√©dico 1" slotData={form.dia1} onChange={d => setForm({...form, dia1: d})} />
                                    <TemplateSlot label="M√©dico 2" slotData={form.dia2} onChange={d => setForm({...form, dia2: d})} />
                                </div>
                                <div>
                                    <h4 className="font-bold text-indigo-600 mb-2">Turno Noche</h4>
                                    <TemplateSlot label="M√©dico 1" slotData={form.noche1} onChange={d => setForm({...form, noche1: d})} />
                                    <TemplateSlot label="M√©dico 2" slotData={form.noche2} onChange={d => setForm({...form, noche2: d})} />
                                </div>
                            </div>
                            <div className="flex gap-2 justify-end mt-4 pt-4 border-t">
                                <Button variant="secondary" onClick={() => setEditingDay(null)}>Cancelar</Button>
                                <Button onClick={guardar}>Guardar Plantilla</Button>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="space-y-6">
                    <Card className="bg-blue-50 border border-blue-200">
                        <h3 className="font-bold text-blue-800 flex items-center gap-2">
                            <LayoutTemplate /> Configuraci√≥n de Guardia Base
                        </h3>
                        <p className="text-sm text-blue-700 mt-1">
                            Aqu√≠ se definen los titulares de cada d√≠a. Importante para que el reporte sepa qu√© es un "extra" y qu√© es una guardia normal.
                        </p>
                    </Card>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        {diasSemana.map((nombreDia, idx) => {
                            const p = plantilla[idx];
                            const getName = (slot) => slot?.medicoId ? medicos.find(m=>m.id == slot.medicoId)?.nombre : 'Vacante';
                            return (
                                <Card key={idx} className="hover:shadow-md transition-shadow relative">
                                    <div className="flex justify-between items-center mb-3 border-b pb-2">
                                        <h4 className="font-bold text-lg">{nombreDia}</h4>
                                        <button onClick={() => setEditingDay(idx)} className="text-blue-600 text-sm hover:underline font-medium">Editar</button>
                                    </div>
                                    {p ? (
                                        <div className="space-y-3 text-sm">
                                            <div>
                                                <span className="text-xs font-bold text-orange-600 uppercase block mb-1">D√≠a</span>
                                                <div className="pl-2 border-l-2 border-orange-200">
                                                    <div className="truncate text-gray-700">1. {getName(p.dia1)}</div>
                                                    <div className="truncate text-gray-700">2. {getName(p.dia2)}</div>
                                                </div>
                                            </div>
                                            <div>
                                                <span className="text-xs font-bold text-indigo-600 uppercase block mb-1">Noche</span>
                                                <div className="pl-2 border-l-2 border-indigo-200">
                                                    <div className="truncate text-gray-700">1. {getName(p.noche1)}</div>
                                                    <div className="truncate text-gray-700">2. {getName(p.noche2)}</div>
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center py-8 text-gray-400 italic text-sm">Sin configurar</div>
                                    )}
                                </Card>
                            );
                        })}
                    </div>
                    {editingDay !== null && <EditTemplateModal />}
                </div>
            );
        };

        // 6. VISTA: CONFIGURACI√ìN (BACKUP)
        const VistaConfiguracion = () => {
            const exportarDatos = () => {
                const datos = { medicos, licencias, guardias, plantilla, fechaExportacion: new Date().toISOString() };
                const blob = new Blob([JSON.stringify(datos, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup_guardias_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };

            const importarDatos = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                if (!confirm("‚ö†Ô∏è ¬°ATENCI√ìN! Al importar se SOBRESCRIBIR√ÅN todos los datos actuales.")) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const datos = JSON.parse(e.target.result);
                        if(datos.medicos) setMedicos(datos.medicos);
                        if(datos.licencias) setLicencias(datos.licencias);
                        if(datos.guardias) setGuardias(datos.guardias);
                        if(datos.plantilla) setPlantilla(datos.plantilla);
                        alert("¬°Datos restaurados con √©xito!");
                    } catch (error) { alert("Error al leer el archivo."); }
                };
                reader.readAsText(file);
            };

            const resetFabrica = () => {
                if (confirm("üö® PELIGRO: Esto borrar√° TODOS los datos de la aplicaci√≥n.")) {
                    localStorage.clear();
                    window.location.reload();
                }
            };

            return (
                <div className="space-y-6 max-w-2xl mx-auto">
                    <Card className="border-l-4 border-blue-500">
                        <h3 className="text-xl font-bold flex items-center gap-2 mb-4"><Save /> Copia de Seguridad</h3>
                        <p className="text-gray-600 mb-6">Descarga una copia regularmente para no perder tu trabajo.</p>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="bg-gray-50 p-4 rounded border text-center">
                                <Download className="mx-auto text-blue-500 mb-2"/>
                                <Button onClick={exportarDatos} className="w-full">Descargar Backup</Button>
                            </div>
                            <div className="bg-gray-50 p-4 rounded border text-center relative">
                                <Upload className="mx-auto text-green-500 mb-2"/>
                                <label className="block w-full">
                                    <span className="bg-green-600 text-white hover:bg-green-700 px-4 py-2 rounded-md transition-colors font-medium cursor-pointer block text-center">Restaurar</span>
                                    <input type="file" accept=".json" onChange={importarDatos} className="hidden" />
                                </label>
                            </div>
                        </div>
                    </Card>
                    <Card className="border-l-4 border-red-500">
                        <h3 className="text-xl font-bold flex items-center gap-2 mb-4 text-red-600"><Trash2/> Zona de Peligro</h3>
                        <Button variant="danger" onClick={resetFabrica} className="w-full">Borrar Todo (Reset)</Button>
                    </Card>
                </div>
            );
        };

        // 3. CALENDARIO
        const VistaCalendario = () => {
            const { days, firstDay, month, year } = getDaysInMonth(currentDate);
            const [selectedDay, setSelectedDay] = useState(null); 
            const mesNombre = currentDate.toLocaleString('es-ES', { month: 'long', year: 'numeric' });
            
            const aplicarPlantilla = () => {
                if (!confirm(`¬øAplicar plantilla a ${mesNombre}? \n\n‚ö†Ô∏è ESTO SOBRESCRIBIR√Å EL MES.`)) return;
                const nuevasGuardias = { ...guardias };
                for (let d = 1; d <= days; d++) {
                    const fechaObj = new Date(year, month, d);
                    const templateDia = plantilla[fechaObj.getDay()];
                    if (templateDia) {
                        nuevasGuardias[fechaObj.toISOString().split('T')[0]] = JSON.parse(JSON.stringify(templateDia));
                    }
                }
                setGuardias(nuevasGuardias);
                alert("Plantilla aplicada.");
            };

            const SlotForm = ({ label, slotData, onChangeSlot, prestadoresDisponibles, fechaStr }) => {
                const data = slotData || { estado: 'VACANTE', tipoPago: 'SISTEMA', derivado: false };
                const medicoSeleccionado = medicos.find(m => m.id === parseInt(data.medicoId));
                const necesitaPrestamista = data.tipoPago === 'SISTEMA' && medicoSeleccionado && (!medicoSeleccionado.tieneRecibo || data.derivado);
                const licenciaInfo = medicoSeleccionado ? obtenerDetalleLicencia(medicoSeleccionado.id, fechaStr) : null;

                return (
                    <div className="bg-gray-50 p-3 rounded border mb-3">
                        <div className="font-bold text-sm text-gray-700 mb-2 flex items-center gap-2">
                            {label.includes('D√≠a') ? <Sun className="text-orange-500"/> : <Moon className="text-indigo-500"/>}
                            {label}
                        </div>
                        <div className="grid grid-cols-1 gap-2">
                            <select className={`w-full p-1 border rounded text-sm ${data.estado === 'VACANTE' ? 'bg-red-50 border-red-200' : ''}`} value={data.estado} onChange={e => onChangeSlot({...data, estado: e.target.value})}>
                                <option value="CUBIERTA">Cubierta</option>
                                <option value="VACANTE">Vacante</option>
                                <option value="LICENCIA_SIAPE">Licencia SIAPE</option>
                            </select>
                            {data.estado !== 'VACANTE' && (
                                <>
                                    <select className="w-full p-1 border rounded text-sm" value={data.medicoId || ''} onChange={e => onChangeSlot({...data, medicoId: e.target.value, derivado: false, prestadorId: ''})}>
                                        <option value="">-- M√©dico --</option>
                                        {medicos.map(m => (
                                            <option key={m.id} value={m.id}>{m.nombre} {estaDeLicencia(m.id, fechaStr) ? '(‚ùå Licencia)' : ''}</option>
                                        ))}
                                    </select>
                                    {licenciaInfo && <div className="text-xs text-red-600 bg-red-50 p-1 rounded">‚ö†Ô∏è {licenciaInfo.motivo}</div>}
                                    <select className="w-full p-1 border rounded text-sm" value={data.tipoPago} onChange={e => onChangeSlot({...data, tipoPago: e.target.value})}>
                                        <option value="SISTEMA">Cobro Sistema</option>
                                        <option value="PERSONAL">Arreglo Personal</option>
                                    </select>
                                    {data.tipoPago === 'SISTEMA' && medicoSeleccionado?.tieneRecibo && (
                                        <div className="flex items-center"><input type="checkbox" checked={data.derivado || false} onChange={e => onChangeSlot({...data, derivado: e.target.checked})}/> <label className="ml-1 text-xs text-gray-600">Derivar cobro</label></div>
                                    )}
                                    {necesitaPrestamista && (
                                        <select className="w-full p-1 border rounded text-sm bg-yellow-50 border-yellow-200" value={data.prestadorId || ''} onChange={e => onChangeSlot({...data, prestadorId: e.target.value})}>
                                            <option value="">-- Cobra (Presta Recibo) --</option>
                                            {prestadoresDisponibles.map(m => <option key={m.id} value={m.id}>{m.nombre}</option>)}
                                        </select>
                                    )}
                                </>
                            )}
                        </div>
                    </div>
                );
            };

            const EditGuardiaModal = () => {
                if (!selectedDay) return null;
                const fechaStr = new Date(year, month, selectedDay).toISOString().split('T')[0];
                const defaultDia = { estado: 'VACANTE', tipoPago: 'SISTEMA' };
                const guardiaActual = guardias[fechaStr] || { dia1: {...defaultDia}, dia2: {...defaultDia}, noche1: {...defaultDia}, noche2: {...defaultDia} };
                const [form, setForm] = useState(guardiaActual);
                const prestadoresDisponibles = medicos.filter(m => m.tieneRecibo && !estaDeLicencia(m.id, fechaStr));

                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
                        <div className="bg-white rounded-lg shadow-xl max-w-4xl w-full p-6 my-8">
                            <div className="flex justify-between items-center mb-4 border-b pb-2">
                                <h3 className="text-xl font-bold">Guardia del {selectedDay} de {mesNombre}</h3>
                                <button onClick={() => setSelectedDay(null)} className="text-gray-500 hover:text-gray-700">‚úï</button>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="space-y-2">
                                    <h4 className="font-bold text-orange-600 flex items-center gap-2 bg-orange-50 p-2 rounded"><Sun /> D√≠a (08:00 - 20:00)</h4>
                                    <div className="grid grid-cols-2 gap-2">
                                        <SlotForm label="M√©dico 1" slotData={form.dia1} onChangeSlot={(d) => setForm({...form, dia1: d})} prestadoresDisponibles={prestadoresDisponibles} fechaStr={fechaStr} />
                                        <SlotForm label="M√©dico 2" slotData={form.dia2} onChangeSlot={(d) => setForm({...form, dia2: d})} prestadoresDisponibles={prestadoresDisponibles} fechaStr={fechaStr} />
                                    </div>
                                </div>
                                <div className="space-y-2">
                                    <h4 className="font-bold text-indigo-600 flex items-center gap-2 bg-indigo-50 p-2 rounded"><Moon /> Noche (20:00 - 08:00)</h4>
                                    <div className="grid grid-cols-2 gap-2">
                                        <SlotForm label="M√©dico 1" slotData={form.noche1} onChangeSlot={(d) => setForm({...form, noche1: d})} prestadoresDisponibles={prestadoresDisponibles} fechaStr={fechaStr} />
                                        <SlotForm label="M√©dico 2" slotData={form.noche2} onChangeSlot={(d) => setForm({...form, noche2: d})} prestadoresDisponibles={prestadoresDisponibles} fechaStr={fechaStr} />
                                    </div>
                                </div>
                            </div>
                            <div className="flex gap-2 justify-end mt-6 border-t pt-4">
                                <Button variant="secondary" onClick={() => setSelectedDay(null)}>Cancelar</Button>
                                <Button onClick={() => { setGuardias({ ...guardias, [fechaStr]: form }); setSelectedDay(null); }}>Guardar</Button>
                            </div>
                        </div>
                    </div>
                );
            };

            const renderCellContent = (fechaStr) => {
                const g = guardias[fechaStr];
                if (!g) return <span className="text-gray-300 text-xs text-center block mt-4">Sin Asignar</span>;
                const renderMiniSlot = (slot) => {
                    if (!slot || slot.estado === 'VACANTE') return <div className="w-2 h-2 rounded-full bg-red-200 mx-auto"></div>;
                    const med = medicos.find(m => m.id == slot.medicoId);
                    let colorClass = "bg-green-200";
                    if (slot.estado === 'LICENCIA_SIAPE') colorClass = "bg-purple-200";
                    else if (slot.tipoPago === 'PERSONAL') colorClass = "bg-orange-200";
                    else if (slot.prestadorId) colorClass = "bg-blue-200";
                    return <div className={`w-full text-[10px] truncate px-1 rounded ${colorClass} mb-[1px]`} title={med ? med.nombre : '?'}>{med ? med.nombre.split(' ').pop() : '?'}</div>;
                };
                return (
                    <div className="flex flex-col h-full justify-end pb-1 gap-[2px]">
                        <div className="grid grid-cols-2 gap-[2px]">{renderMiniSlot(g.dia1)}{renderMiniSlot(g.dia2)}</div>
                        <div className="h-[1px] bg-gray-100"></div>
                        <div className="grid grid-cols-2 gap-[2px]">{renderMiniSlot(g.noche1)}{renderMiniSlot(g.noche2)}</div>
                    </div>
                );
            };

            const blanks = Array(firstDay).fill(null);
            const daysArray = Array.from({ length: days }, (_, i) => i + 1);

            return (
                <div className="space-y-4">
                    <div className="flex justify-between items-center mb-4">
                        <div className="flex items-center gap-2">
                            <button onClick={() => setCurrentDate(new Date(year, month - 1))} className="p-2 hover:bg-gray-200 rounded">‚Üê</button>
                            <h2 className="text-xl font-bold capitalize">{mesNombre}</h2>
                            <button onClick={() => setCurrentDate(new Date(year, month + 1))} className="p-2 hover:bg-gray-200 rounded">‚Üí</button>
                        </div>
                        <Button onClick={aplicarPlantilla} variant="warning" className="text-sm"><RefreshCw /> Cargar Plantilla</Button>
                    </div>
                    <div className="grid grid-cols-7 gap-1 md:gap-4 text-center">
                        {['Dom','Lun','Mar','Mi√©','Jue','Vie','S√°b'].map(d => <div key={d} className="font-bold text-gray-500 text-sm py-2">{d}</div>)}
                        {blanks.map((_, i) => <div key={`blank-${i}`} className="h-24 md:h-32 bg-gray-50 rounded"></div>)}
                        {daysArray.map(day => {
                            const fechaStr = new Date(year, month, day).toISOString().split('T')[0];
                            return <div key={day} onClick={() => setSelectedDay(day)} className="h-24 md:h-32 border p-1 rounded cursor-pointer hover:shadow-md transition-shadow flex flex-col justify-between bg-white relative"><div className="font-bold text-right text-sm absolute top-1 right-2">{day}</div><div className="mt-5 h-full">{renderCellContent(fechaStr)}</div></div>;
                        })}
                    </div>
                    {selectedDay && <EditGuardiaModal />}
                </div>
            );
        };

        // 4. REPORTE FILTRADO "ESTILO MINISTERIO"
        const VistaReporte = () => {
            const { month, year } = getDaysInMonth(currentDate);
            const mesNombre = currentDate.toLocaleString('es-ES', { month: 'long', year: 'numeric' });
            
            const itemsVacantes = [];
            const itemsLicencias = [];

            // Helper: Detectar SADOFE (S√°bado o Domingo)
            const esSadofe = (fechaObj) => {
                const day = fechaObj.getDay();
                return day === 0 || day === 6; // 0=Domingo, 6=S√°bado
            };

            // Recorrer mes
            for (let d = 1; d <= 31; d++) {
                const fechaObj = new Date(year, month, d);
                if (fechaObj.getMonth() !== month) break;
                const fechaStr = fechaObj.toISOString().split('T')[0];
                const diaSemana = fechaObj.getDay();
                
                const g = guardias[fechaStr];
                const p = plantilla[diaSemana]; // Plantilla para comparar

                if (!g) continue;

                // Funci√≥n interna para chequear un slot
                const analizarSlot = (actualSlot, templateSlot, turnoNombre) => {
                    // Solo nos interesa si est√° cubierto y NO es pago personal
                    if (!actualSlot || actualSlot.estado !== 'CUBIERTA' || !actualSlot.medicoId || actualSlot.tipoPago === 'PERSONAL') return;

                    const medicoActual = medicos.find(m => m.id == actualSlot.medicoId);
                    const prestador = actualSlot.prestadorId ? medicos.find(m => m.id == actualSlot.prestadorId) : null;
                    const receptor = prestador ? prestador : medicoActual; // Qui√©n cobra

                    // CASO 1: VACANTE (En plantilla no hab√≠a nadie asignado o estaba expl√≠cito como vacante)
                    // Si el template slot es null, undefined o tiene medicoId vac√≠o, es una vacante original.
                    const esVacanteOriginal = !templateSlot || !templateSlot.medicoId;

                    if (esVacanteOriginal) {
                        itemsVacantes.push({
                            fecha: `${d}/${month + 1}/${year}`,
                            medico: medicoActual.nombre,
                            receptor: receptor.nombre,
                            sadofe: esSadofe(fechaObj),
                            medicoId: medicoActual.id,
                            receptorId: receptor.id,
                            diaRaw: d // Para agrupar
                        });
                        return;
                    }

                    // CASO 2: LICENCIA (En plantilla hab√≠a alguien, pero vino otro)
                    // Si el m√©dico actual es distinto al de la plantilla
                    if (templateSlot.medicoId && parseInt(templateSlot.medicoId) !== parseInt(actualSlot.medicoId)) {
                        itemsLicencias.push({
                            fecha: `${d}/${month + 1}/${year}`,
                            medico: medicoActual.nombre,
                            receptor: receptor.nombre,
                            sadofe: esSadofe(fechaObj),
                            medicoId: medicoActual.id,
                            receptorId: receptor.id,
                            diaRaw: d
                        });
                    }
                };

                // Analizamos los 4 slots
                analizarSlot(g.dia1, p?.dia1, 'D√≠a 1');
                analizarSlot(g.dia2, p?.dia2, 'D√≠a 2');
                analizarSlot(g.noche1, p?.noche1, 'Noche 1');
                analizarSlot(g.noche2, p?.noche2, 'Noche 2');
            }

            // FUNCI√ìN DE AGRUPACI√ìN (Detectar 24hs)
            // Si un mismo receptor aparece 2 veces el mismo d√≠a, lo convertimos en una ficha de 24hs
            const agruparItems = (lista) => {
                const procesados = [];
                const mapa = new Map(); // Clave: fecha + receptorId

                lista.forEach(item => {
                    const key = item.fecha + '-' + item.receptorId;
                    if (mapa.has(key)) {
                        // Ya existe, significa que tiene otro slot ese d√≠a -> Es 24hs
                        const existente = mapa.get(key);
                        existente.es24 = true;
                    } else {
                        item.es24 = false;
                        mapa.set(key, item);
                        procesados.push(item);
                    }
                });
                // Filtramos la lista final usando los objetos modificados en el mapa
                // Pero necesitamos mantener el orden o estructura.
                // Mejor reconstruimos la lista desde los valores √∫nicos del mapa
                return Array.from(mapa.values()).sort((a,b) => a.diaRaw - b.diaRaw);
            };

            const vacantesFinal = agruparItems(itemsVacantes);
            const licenciasFinal = agruparItems(itemsLicencias);

            // Componente de Fila de Tabla
            const FilaReporte = ({ item }) => (
                <tr className="border-b">
                    <td className="px-4 py-2 text-center">{item.fecha}</td>
                    <td className="px-4 py-2 text-center border-l bg-gray-50">{!item.sadofe && !item.es24 ? 'X' : ''}</td>
                    <td className="px-4 py-2 text-center border-l bg-gray-50">{!item.sadofe && item.es24 ? 'X' : ''}</td>
                    <td className="px-4 py-2 text-center border-l bg-blue-50">{item.sadofe && !item.es24 ? 'X' : ''}</td>
                    <td className="px-4 py-2 text-center border-l bg-blue-50">{item.sadofe && item.es24 ? 'X' : ''}</td>
                    <td className="px-4 py-2 border-l font-medium">{item.receptor}</td>
                </tr>
            );

            return (
                <div className="space-y-8 bg-white p-8 min-h-screen">
                    <div className="text-center mb-8">
                        <h2 className="text-2xl font-bold uppercase border-b-2 border-black inline-block pb-1">Reporte de Guardias Extra - {mesNombre}</h2>
                        <p className="text-sm text-gray-500 mt-2">Solo incluye coberturas de Vacantes y Licencias (Pago Ministerio)</p>
                    </div>

                    {/* SECCI√ìN VACANTES */}
                    <div>
                        <h3 className="bg-gray-200 p-2 font-bold uppercase text-sm mb-2 border border-gray-400">Cobertura de Cargos Vacantes</h3>
                        <table className="w-full text-sm border-collapse border border-gray-400">
                            <thead>
                                <tr className="bg-gray-100 text-xs uppercase">
                                    <th className="border p-2 w-24">Fecha</th>
                                    <th className="border p-2 w-16">12 hs<br/>Sem</th>
                                    <th className="border p-2 w-16">24 hs<br/>Sem</th>
                                    <th className="border p-2 w-16 bg-blue-50">12 hs<br/>SADOFE</th>
                                    <th className="border p-2 w-16 bg-blue-50">24 hs<br/>SADOFE</th>
                                    <th className="border p-2 text-left">Depositar en recibo de</th>
                                </tr>
                            </thead>
                            <tbody>
                                {vacantesFinal.map((item, i) => <FilaReporte key={i} item={item} />)}
                                {vacantesFinal.length === 0 && <tr><td colSpan="6" className="text-center py-4 text-gray-400 italic">No hay coberturas de vacantes registradas</td></tr>}
                            </tbody>
                        </table>
                    </div>

                    {/* SECCI√ìN LICENCIAS */}
                    <div>
                        <h3 className="bg-gray-200 p-2 font-bold uppercase text-sm mb-2 border border-gray-400 mt-8">Cobertura de Licencias / Otros</h3>
                        <table className="w-full text-sm border-collapse border border-gray-400">
                            <thead>
                                <tr className="bg-gray-100 text-xs uppercase">
                                    <th className="border p-2 w-24">Fecha</th>
                                    <th className="border p-2 w-16">12 hs<br/>Sem</th>
                                    <th className="border p-2 w-16">24 hs<br/>Sem</th>
                                    <th className="border p-2 w-16 bg-blue-50">12 hs<br/>SADOFE</th>
                                    <th className="border p-2 w-16 bg-blue-50">24 hs<br/>SADOFE</th>
                                    <th className="border p-2 text-left">Depositar en recibo de</th>
                                </tr>
                            </thead>
                            <tbody>
                                {licenciasFinal.map((item, i) => <FilaReporte key={i} item={item} />)}
                                {licenciasFinal.length === 0 && <tr><td colSpan="6" className="text-center py-4 text-gray-400 italic">No hay coberturas de licencias registradas</td></tr>}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const renderView = () => {
            switch(view) {
                case 'calendario': return <VistaCalendario />;
                case 'medicos': return <VistaMedicos />;
                case 'licencias': return <VistaLicencias />;
                case 'plantilla': return <VistaPlantilla />;
                case 'reporte': return <VistaReporte />;
                case 'config': return <VistaConfiguracion />;
                default: return <VistaCalendario />;
            }
        };

        return (
            <div className="min-h-screen pb-10 font-sans text-gray-900 bg-gray-50">
                <nav className="bg-white shadow mb-6">
                    <div className="max-w-7xl mx-auto px-4">
                        <div className="flex justify-between h-16">
                            <div className="flex items-center">
                                <span className="font-bold text-xl text-blue-600 flex items-center gap-2"><Umbrella /> Guardias Pedi√°tricas</span>
                            </div>
                            <div className="flex space-x-2 items-center overflow-x-auto">
                                <button onClick={() => setView('calendario')} className={`px-3 py-1 rounded ${view === 'calendario' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`}>Calendario</button>
                                <button onClick={() => setView('medicos')} className={`px-3 py-1 rounded ${view === 'medicos' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`}>M√©dicos</button>
                                <button onClick={() => setView('licencias')} className={`px-3 py-1 rounded ${view === 'licencias' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`}>Licencias</button>
                                <button onClick={() => setView('plantilla')} className={`px-3 py-1 rounded ${view === 'plantilla' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`}>Plantilla</button>
                                <button onClick={() => setView('reporte')} className={`px-3 py-1 rounded ${view === 'reporte' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`}>Reporte</button>
                                <button onClick={() => setView('config')} className={`px-3 py-1 rounded ${view === 'config' ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-500 hover:bg-gray-100'}`} title="Configuraci√≥n"><Settings /></button>
                            </div>
                        </div>
                    </div>
                </nav>
                <main className="max-w-7xl mx-auto px-4">{renderView()}</main>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>
</body>
</html>
